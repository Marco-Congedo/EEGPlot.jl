var documenterSearchIndex = {"docs":
[{"location":"#EEGPlot.jl","page":"Home","title":"EEGPlot.jl","text":"A julia package based on Makie.jl to plot electroencephalography (EEG) and event-related potentials (ERP). ","category":"section"},{"location":"#Static-and-Interactive-mode","page":"Home","title":"‚öôÔ∏è Static and Interactive mode","text":"Two backends for Makie.jl are supported:\n\nCairoMakie.jl, which produces a STATIC plot ‚Äî mainly for saving figures;\nGLMakie.jl, which produces an INTERACTIVE plot ‚Äî for data inspection.\n\nnote: Switching backend\nTo switch from one backend to the other, use GLMakie.activate!() and CairoMakie.activate!().\n\n","category":"section"},{"location":"#Datasets","page":"Home","title":"üìà Datasets","text":"EEGPlot can plot several datasets at the same time, employing two panels:\n\nthe upper panel shows an EEG/ERP dataset and can overlay another one with the exact same dimension. \n\ntip: Dataset overlay\nUsing an interactive plot, it is simple to view only the first dataset, only the second, both or their difference;\n\nthe lower panel can show yet another dataset, which may have a different number of channels.\n\ntip: Panel Synchronization\nWhen both panels are used, scrolling and zooming in the datasets on the upper and lower panel is synchronized. This is very useful in several situations, such as inspecting a dataset along with its spatial filters or source separation components,  inspecting a dataset decomposed in artifacts plus a cleaned component, etc.\n\n","category":"section"},{"location":"#Requirements","page":"Home","title":"üß© Requirements","text":"julia version ‚â• 1.10,\nMakie version ‚â• 0.24.8,\nthe CairoMakie and/or GLMakie backend for Makie.jl.\n\n","category":"section"},{"location":"#Installation","page":"Home","title":"üì¶ Installation","text":"Execute the following commands in Julia's REPL:\n\n]add https://github.com/Marco-Congedo/EEGPlot.jl\n\n","category":"section"},{"location":"#‚Äî-Quick-Start","page":"Home","title":"‚ÄîÕûÕüÕûÕü‚òÖ Quick Start","text":"The following examples make use of Eegle.jl for reading example data and of both Makie's backends GLMakie and CairoMakie. First, install these packages:\n\n]add Eegle, GLMakie, CairoMakie\n\n","category":"section"},{"location":"#Index-of-working-examples","page":"Home","title":"Index of working examples","text":"Static Plots \nPlotting Multiple Datasets \nInteractive Plots \nERPs\n\nSee also Examples.\n\n","category":"section"},{"location":"#Static-Plots","page":"Home","title":"Static Plots","text":"using EEGPlot, Eegle, CairoMakie\n\n# read example EEG data, sampling rate and sensor labels from Eegle\nX, sr = readASCII(EXAMPLE_Normative_1), 128;\nsensors = readSensors(EXAMPLE_Normative_1_sensors);\n\n# plot EEG\neegplot(X, sr, sensors; fig_size=(814, 450)) \n\n\n‚ñ≤ Index of working examples\n\n","category":"section"},{"location":"#Plotting-Multiple-Datasets","page":"Home","title":"Plotting Multiple Datasets","text":"The following example illustrates the inspection of PCA components. The workflow is :\n\ncompute u, the principal axis of data X, as the eigenvector of its covariance matrix associated to the largest eigenvalue,\ncompute y, the principal component time series (principal component score or activation), as \n\ny = X u\n\ncompute P, the data X projected on this component (subspace projection), as\n\nP = y u^T\n\nplot X and overlay P on the upper panel, y on the lower panel.\n\nusing EEGPlot, Eegle, LinearAlgebra, CairoMakie\n\n# read example EEG data, sampling rate and sensor labels from Eegle\nX, sr = readASCII(EXAMPLE_Normative_1), 128;\nsensors = readSensors(EXAMPLE_Normative_1_sensors);\n\nu = eigvecs(covmat(X; covtype=SCM))[:, end]\ny = X * reshape(u, :, 1) # using reshape, y will be a Tx1 Matrix\nP = y * u'\neegplot(X, sr, sensors; overlay=P, Y=y, Y_size=0.1, fig_size=(814, 614))\n\nIn the plot above, we see X in dark grey, P in brick red and y in green.\n\n‚ñ≤ Index of working examples\n\n","category":"section"},{"location":"#Interactive-Plots","page":"Home","title":"Interactive Plots","text":"It is obtained using the GLMakie backend instead. The syntax of eegPlot does not change ta all. For example, to obtain an interactive plot of the PCA above, we would do:\n\nusing GLMakie\n\n# since you may have been using CairoMakie, make sure to switch backend\nGLMakie.activate!()\n\n# read example EEG data, sampling rate and sensor labels from Eegle\nX, sr = readASCII(EXAMPLE_Normative_1), 128;\nsensors = readSensors(EXAMPLE_Normative_1_sensors);\n\nu = eigvecs(covmat(X; covtype=SCM))[:, end]\ny = X * reshape(u, :, 1) # using reshape, y will be a Tx1 Matrix\nP = y * u'\n\n# The syntax is exactly the same as above\neegplot(X, sr, sensors; overlay=P, Y=y, Y_size=0.1)\n\nSuch plots allows interactions and look like this:\n\n(Image: )\n\nNote that in addition to static plots, interactive plots feature:\n\na central slider to resize the upper and lower panels,\na slider at the bottom of the window to scroll the data,\nan help panel summarizing the interaction controls (visible by default). \n\nwarning: Check the task bar\nInteractive plots open as a separate window. The window may open minimized. \n\n‚ñ≤ Index of working examples\n\n","category":"section"},{"location":"#ERPs","page":"Home","title":"ERPs","text":"For an example of plotting evoked potentials, we will consider the example P300 file provided by Eegle.jl. In P300 experiments, we are interested in two classes of ERP, named \"target\" and \"nontarget\". Please see Eegle.ERPs for details on the ERP computations.\n\nusing EEGPlot, Eegle, CairoMakie\nCairoMakie.activate!()\n\n# read the example file for the P300 BCI paradigm\no = readNY(EXAMPLE_P300_1, rate=4, upperLimit=1.2, bandPass=(1, 24)) # See Eegle.readNY\n\n# compute means (adaptive weights and multivariate regression)\nM = mean(o; overlapping=true, weights=:a) # See Eegle.mean\n\n# target and non-target average ERP\nT_ERP = M[findfirst(isequal(\"target\"), o.clabels)]\nNT_ERP = M[findfirst(isequal(\"nontarget\"), o.clabels)]\n\neegplot(T_ERP, o.sr, o.sensors; \n        fig_size = (812, 450),\n        overlay = NT_ERP, \n        Y_labels = o.sensors,\n        win_length = o.wl, # trial length in samples\n        px_per_sec = 720,\n        init_scale = 0.7,\n        X_title = \"EPR target (grey) and nontarget (red)\")\n\nFor plotting ERPs, see also UnfoldMakie.\n\n‚ñ≤ Index of working examples\n\n","category":"section"},{"location":"#API","page":"Home","title":"üîå API","text":"The package exports one function only:\n\nfunction eegplot(X, sr, X_labels; args...)","category":"section"},{"location":"#Arguments","page":"Home","title":"Arguments","text":"a matrix X in mathbbR^T times N_X for the upper panel, where T and N_X are the number of samples and channels,\nthe sampling rate of dataset X (Int),\nthe labels of X (Vector of String), which can be omitted.","category":"section"},{"location":"#Optional-Keyword-Arguments-(kwargs)","page":"Home","title":"Optional Keyword Arguments (kwargs)","text":"Argument Type Description Default value\nfig_size 2-tuple of Int size of the plot (1400, 800)\nX_title String title of the upper panel nothing\nX_color Symbol (named color) color of X dataset :grey24\noverlay Matrix in mathbbR^T times N_X overlay dataset nothing\noverlay_color Symbol (named color) color of the overlay dataset :firebrick\ndiff_color Symbol (named color) color of the difference X - overlay :cornflower\nY Matrix in mathbbR^T times N_Y lower panel dataset nothing\nY_labels Vector of String lower panel labels nothing\nY_title String title of the lower panel nothing\nY_color Symbol (named color) color of lower panel dataset :darkgreen\nY_size 0.05 < Real < 0.95 title of the lower panel nothing\ni_panel Bool help panel visibility true\ni_panel_font String help panel font \"DejaVu Sans\"\ni_panel_font_size Int ‚â• 4 help panel font size 14\nstart_pos Int ‚â• 1 first sample to show 1 (first sample)\nwin_length Int ‚â• 0;  0 = Auto number of samples to show 0\npx_per_sec Int ‚â• 100 number of pixels to cover 1s 200\ninit_scale Real > 0 initial scaling 0.61803...\nscale_change Real > 0 speed of scale change using Interactions 0.1\nimage_quality 1 ‚â§ Int ‚â§ 4 Image quality for saving using Interactions 1\n\n","category":"section"},{"location":"#Examples","page":"Home","title":"üí° Examples","text":"The examples here below assume the existence of data Xin mathbbR^T times N_X, sampling rate sr and labels sensors:\n\nusing EEGPlot, CairoMakie # or GLMakie for interactive plots\n\n# Plot with default settings\neegplot(X, sr, sensors)\n\n# Save a figure with large size and high quality (ppi)\n# (for saving figures CairoMakie is preferable)\nfig = eegplot(X, sr, sensors; \n            fig_size = (3000, 1000), \n            image_quality = 4)\nsave(\"figure.png\", fig)\n\n# Plot without providing labels for X\neegplot(X, sr)\n\n# Two panels; Y must have the same # of samples as X\neegplot(X, sr, sensors; \n        Y = X)\n\n# Overlay; must have the same # of samples and of channels as X\neegplot(X, sr, sensors; \n        overlay = X)\n\n# Both overlay and two panels\neegplot(X, sr, sensors; \n        overlay = X, \n        Y = X)\n\n# Change pixels per second (time-constant)\neegplot(X, sr, sensors; \n        px_per_sec = 300)\n\n# Notice that the data is plotted with the same time-constant\n# regardless the sampling rate. For example, doubling the sr\nusing Eegle # for `resample`\neegplot(resample(X, sr, 2), 256, sensors; \n        px_per_sec = 300)\n\n# Change titles and colors\neegplot(X, sr, sensors; \n        Y = X, \n        X_title = \"This the title for the upper panel\",\n        X_color = :blue,\n        Y_title = \"This the title for the lower panel\",\n        Y_color = :darkviolet,\n        )\n\n# Start plotting from second 2    \nheegplot(X, sr, sensors; \n        start_pos = sr*2)\n\n# Start plotting from an arbitrary sample (345)\neegplot(X, sr, sensors; \n        start_pos = 345)\n\n# Plot from sample 345 to sample 345+sr*2 (2s)\neegplot(X, sr, sensors; \n        start_pos = 129, \n        win_length = sr*4)\n\n\n","category":"section"},{"location":"#Interactions","page":"Home","title":"üéÆ Interactions","text":"The following commands are available only in interactive mode.\n\nwarning: Set Focus\nIf the plot does not respond to the controls, set the focus on the plot by clicking anywhere on it.","category":"section"},{"location":"#Keyboard-controls","page":"Home","title":"‚å® Keyboard controls","text":"‚ñ¥ Upper Panel\n\n'X': show the X dataset\n'O': show the overlay dataset (if overlay kwarg is passed)\n'B': show both X and overlay dataset (idem)\n'D': show the difference X - overlay (idem)\nShift + ‚Üë/‚Üì: scale X up/down (use scale_change kwarg)\n\n‚ñæ Lower Panel (if Y kwarg is passed)\n\n'Y': toggle Y data (lower panel) visibility \nCtrl + ‚Üë/‚Üì: scale Y up/down (use scale_change kwarg)\nSlider: resize the lower panel\n\n‚åñ Navigation (apply to all visible panels)\n\n‚Üê/‚Üí: scroll backward and forward the dataset(s) \n‚Üë/‚Üì: scale up and down the dataset(s) (use scale_change kwarg)\nPage Up: move to begin of dataset(s)\nPage Down: move to end of dataset(s)\n\n‚öô Tools\n\n'M': toggle the status of the plot window (maximized/normal)\n'Esc': restore the normal status if the window is maximized\n'S': save the plot in the current directory as a .png file (use image_quality kwarg)\n'C': copy the plot to the clipboard\n'H': toggle the visibility of the help panel","category":"section"},{"location":"#Mouse-Controls","page":"Home","title":"‚äï Mouse Controls","text":"Click & Drag: zoom along the time-axis\nCtrl + Click: reset the view as it was before zooming.\n\n","category":"section"},{"location":"#About-the-authors","page":"Home","title":"‚úçÔ∏è About the authors","text":"Marco Congedo, Tomas Ros and Generative AI.\n\n","category":"section"},{"location":"#Contribute","page":"Home","title":"üå± Contribute","text":"Please contact the authors if you are interested in contributing.","category":"section"},{"location":"#Index","page":"Home","title":"üß≠ Index","text":"Pages = [\"index.md\"]\nDepth = 3","category":"section"}]
}
